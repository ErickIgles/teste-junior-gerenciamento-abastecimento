{% extends 'base.html' %}



{% block main %}
    <nav>
        <form method="get" 
        style="display: flex; margin: 20px 20px 20px 0px; flex-direction: row; gap: 20px;">
            <input 
                style="padding: 8px;" 
                type="text" 
                placeholder="pesquisar..." 
                name="q" 
                value="{{ request.GET.q }}"
            >
            <div>
                <label 
                    for="data_inicio"
                >
                    De:
                </label>
                <input 
                    style="padding: 8px;" 
                    type="date" 
                    name="data_inicio" 
                    value="{{ request.GET.data_inicio }}"
                >
            </div>
            <div>
                <label 
                    for="data_fim"
                >
                    At√©:
                </label>
                <input 
                    style="padding: 8px;" 
                    type="date" 
                    name="data_fim" 
                    value="{{ request.GET.data_fim }}"
                >
            </div>
            <button 
                style="padding: 8px;" 
                type="submit"
            >
                üîç Filtrar
            </button>
        </form>

        <div 
            style="
                margin: 20px 0; 
                background-color: #ffffff; 
                width: 320px; 
                height: px; 
                padding: 10px 0; 
                text-align: center;"
            >
            <span>
                {% if page_obj.has_previous %}
                    <a 
                        style="
                            text-decoration: none; 
                            color: #000000;
                            border: 2px solid rgba(34, 133, 255, 0.667); 
                            padding: 3px;
                            border-radius: 4px;
                            cursor: pointer;
                        
                    " href="?page=1"
                    >
                        &laquo; voltar
                    </a>
                {% endif %}

                <span class="current">
                    Page {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}.
                </span>

                {% if page_obj.has_next %}
                    <a 
                        style="
                            text-decoration: none; 
                            color: #000000; 
                            border: 2px solid rgba(34, 133, 255, 0.667); 
                            padding: 3px;
                            border-radius: 4px;
                            cursor: pointer;
                        " 
                    href="?page={{ page_obj.next_page_number }}"
                    >
                        pr√≥xima
                    </a>
                {% endif %}
            </span>
        </div>
    </nav>
    {% if bombas %}
        {% for bomba in bombas %}
            <div 
                style="
                    display: flex; 
                    flex-direction: 
                    column; gap: 10px; 
                    margin-bottom: 40px;"
                >
                <p>
                    <strong>Nome da bomba: </strong> 
                    {{ bomba.nome_bomba }}
                </p>

                {% if bomba.tanque.tipo_combustivel %}
                    <p>
                        <strong>Tipo de Tanque: </strong> 
                        {{ bomba.tanque.tipo_combustivel }}
                    </p>
                    <p>
                        <strong>Identificador do tanque: </strong> 
                        {{ bomba.tanque.identificador_tanque }}
                    </p>
                {% else %}
                    <p>
                        <strong>Tanque:</strong> N√£o vinculado
                    </p>
                {% endif %}
                {% if bomba.ativo %}
                    <p>
                        <strong>Status da Bomba: </strong>
                        Ativo üü¢
                    </p>
                {% else %}
                    <p>
                        <strong>Status da Bomba: </strong>
                        Desativado üî¥
                    </p>
                {% endif %}
                <p>
                    <strong>Data de registro: </strong>
                    {{ bomba.criado }}
                </p>
                <hr>
                <div class="form__actions">
                    <a 
                        href="{% url 'cadastros:bombas:atualizar' bomba.pk %}"
                    >
                        <button 
                            type="button" 
                            class="form__button form__button__enviar"
                        >
                            Atualizar
                        </button>
                    </a> 
                    <a 
                        href="{% url 'cadastros:bombas:inativar' bomba.pk %}" 
                        class="form__button form__button__deletar">
                        Desativar
                    </a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <h2>Ainda n√£o h√° registros no sistema</h2>
    {% endif %}
{% endblock %}