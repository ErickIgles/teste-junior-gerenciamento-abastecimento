<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<style>
    body { font-family: Arial, sans-serif; font-size: 10px; }
    header {
        text-align: center;
        margin-bottom: 20px;
        border-bottom: 2px solid #2c3e50;
        padding-bottom: 10px;
    }
    h2 { text-align: center; color: #2c3e50 }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    thead { background-color: #2c3e50; color: white; }
    tfoot td { font-weight: bold; background-color: #f1f1f1; }
    tr {
         page-break-inside: avoid;
    }
    .footer { margin-top: 20px; text-align: right; }
</style>
</head>
<body>
    <h2>Relatório Geral de Abastecimentos</h2>

    <table>
        <thead>
            <tr>
                <th>Data</th>
                <th>Responsável</th>
                <th>Combustível</th>
                <th>Litros</th>
                <th>Valor</th>
            </tr>
        </thead>
        <tbody>
            {% for registro in registros %}
            <tr>
                <td>{{ registro.criado|date:"d/m/Y H:i" }}</td>
                <td>
                    {% if registro.funcionario %}
                        {{ registro.funcionario.nome_funcionario }}
                    {% else %}
                        {{ registro.empresa.razao_social }}
                    {% endif %}
                </td>
                <td>{{ registro.tipo_combustivel.nome_combustivel }}</td>
                <td>{{ registro.litros_abastecido|floatformat:2 }}</td>
                <td>R$ {{ registro.valor_total_abastecimento|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5">Nenhum abastecimento encontrado para os filtros selecionados.</td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <td colspan="3" style="text-align: right;">Totais:</td>
                <td>{{ total_litros|floatformat:2 }}</td>
                <td>R$ {{ total_valor|floatformat:2 }}</td>
            </tr>
        </tfoot>
    </table>

</body>
</html>